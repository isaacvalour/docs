---
title: "Rate Calculator"
api: "POST /v1/rates/calculator"
description: "Calculate exchange amounts and fees for currency conversions"
---

## Overview

Calculate the exact amount you'll receive when converting between currencies, including all applicable fees. This endpoint helps you provide accurate quotes to users before creating transactions.

<Note>
The calculated amounts are estimates and may vary slightly due to market fluctuations. Always use the most recent rates for accurate calculations.
</Note>

## Request Body

<ParamField body="from_currency" type="string" required>
  Source currency code (e.g., `"USD"`, `"NGN"`)
</ParamField>

<ParamField body="to_currency" type="string" required>
  Destination currency code (e.g., `"USDC"`, `"EUR"`)
</ParamField>

<ParamField body="amount" type="string" required>
  Amount to convert (in source currency)
</ParamField>

<ParamField body="include_fees" type="boolean">
  Include detailed fee breakdown (default: true)
</ParamField>

## Response

<ResponseField name="from_currency" type="string">
  Source currency code
</ResponseField>

<ResponseField name="to_currency" type="string">
  Destination currency code
</ResponseField>

<ResponseField name="input_amount" type="string">
  Input amount in source currency
</ResponseField>

<ResponseField name="exchange_rate" type="string">
  Exchange rate used for calculation
</ResponseField>

<ResponseField name="gross_amount" type="string">
  Amount before fees (in destination currency)
</ResponseField>

<ResponseField name="fees" type="object">
  Fee breakdown
</ResponseField>

<ResponseField name="fees.fixed" type="string">
  Fixed fee amount
</ResponseField>

<ResponseField name="fees.percentage" type="string">
  Percentage fee amount
</ResponseField>

<ResponseField name="fees.total" type="string">
  Total fees deducted
</ResponseField>

<ResponseField name="net_amount" type="string">
  Final amount after fees (in destination currency)
</ResponseField>

<ResponseField name="rate_expires_at" type="string">
  Rate expiration timestamp (ISO 8601)
</ResponseField>

<ResponseField name="calculated_at" type="string">
  Calculation timestamp (ISO 8601)
</ResponseField>

## Example Request

<CodeGroup>

```bash cURL
curl -X POST "https://api.railsfromthecrypt.com/v1/rates/calculator" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "from_currency": "USD",
    "to_currency": "USDC",
    "amount": "1000.00",
    "include_fees": true
  }'
```

```javascript JavaScript
const response = await fetch('https://api.railsfromthecrypt.com/v1/rates/calculator', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_ACCESS_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    from_currency: 'USD',
    to_currency: 'USDC',
    amount: '1000.00',
    include_fees: true
  })
});

const calculation = await response.json();
```

</CodeGroup>

## Example Response

<ResponseExample>

```json Success Response
{
  "from_currency": "USD",
  "to_currency": "USDC",
  "input_amount": "1000.00",
  "exchange_rate": "1.0000",
  "gross_amount": "1000.00",
  "fees": {
    "fixed": "0.00",
    "percentage": "1.00",
    "total": "1.00"
  },
  "net_amount": "999.00",
  "rate_expires_at": "2024-01-01T12:05:00Z",
  "calculated_at": "2024-01-01T12:00:00Z"
}
```

</ResponseExample>

## Usage Examples

### Calculate Exchange Amount

<CodeGroup>

```javascript JavaScript
async function calculateExchange(fromCurrency, toCurrency, amount) {
  try {
    const response = await fetch('https://api.railsfromthecrypt.com/v1/rates/calculator', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        from_currency: fromCurrency,
        to_currency: toCurrency,
        amount: amount,
        include_fees: true
      })
    });

    if (!response.ok) {
      throw new Error('Failed to calculate exchange');
    }

    const calculation = await response.json();
    return calculation;
  } catch (error) {
    console.error('Error calculating exchange:', error);
    throw error;
  }
}

// Usage
const result = await calculateExchange('USD', 'USDC', '1000.00');
console.log(`$${result.input_amount} USD = ${result.net_amount} USDC (after ${result.fees.total} fees)`);
```

</CodeGroup>

### Compare Exchange Options

<CodeGroup>

```javascript JavaScript
async function compareExchangeOptions(amount, targetCurrency) {
  const currencies = ['USD', 'EUR', 'GBP', 'NGN'];
  const results = [];

  for (const currency of currencies) {
    try {
      const calculation = await calculateExchange(currency, targetCurrency, amount);
      results.push({
        from: currency,
        to: targetCurrency,
        input: calculation.input_amount,
        output: calculation.net_amount,
        fees: calculation.fees.total,
        rate: calculation.exchange_rate
      });
    } catch (error) {
      console.error(`Error calculating ${currency} to ${targetCurrency}:`, error);
    }
  }

  // Sort by best rate (highest output)
  results.sort((a, b) => parseFloat(b.output) - parseFloat(a.output));

  return results;
}

// Usage
const options = await compareExchangeOptions('1000.00', 'USDC');
console.log('Best exchange options:', options);
```

</CodeGroup>

## Related Endpoints

<CardGroup cols={2}>
  <Card
    title="List Exchange Rates"
    icon="list"
    href="/api/rates/list"
  >
    Get current exchange rates
  </Card>
  <Card
    title="Supported Currencies"
    icon="coins"
    href="/api/rates/currencies"
  >
    Get list of supported currencies
  </Card>
</CardGroup>
