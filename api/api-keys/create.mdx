---
title: "Create API Key"
description: "Create a new API key for programmatic access"
---

## Overview

Create a new API key for programmatic access to the API. The key secret is only shown once during creation.

<Warning>
Store the API key secret securely as it cannot be retrieved again. The secret is only shown in the response once.
</Warning>

## Request

<ParamField path="label" type="string" required>
  A descriptive label for the API key
</ParamField>

<ParamField path="permissions" type="array" required>
  Array of permissions for this API key. Valid values: ["read", "write", "transfers", "admin"]
</ParamField>

<ParamField path="expires_at" type="string">
  ISO 8601 timestamp when the key should expire. If not provided, the key will not expire.
</ParamField>

<ParamField path="ip_restrictions" type="array">
  Array of IP addresses or CIDR ranges that can use this key
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Indicates if the request was successful
</ResponseField>

<ResponseField name="data" type="object">
  The created API key object
</ResponseField>

<ResponseField name="data.id" type="string">
  Unique identifier for the API key
</ResponseField>

<ResponseField name="data.label" type="string">
  The label assigned to the API key
</ResponseField>

<ResponseField name="data.secret" type="string">
  API key secret (only shown once)
</ResponseField>

<ResponseField name="data.permissions" type="array">
  Array of permissions granted to this API key
</ResponseField>

<ResponseField name="data.status" type="string">
  Current status of the API key. One of: "active", "inactive", "expired"
</ResponseField>

<ResponseField name="data.created_at" type="string">
  ISO 8601 timestamp when the key was created
</ResponseField>

<ResponseField name="data.expires_at" type="string">
  ISO 8601 timestamp when the key expires (null if no expiration)
</ResponseField>

<ResponseField name="data.last_used_at" type="string">
  ISO 8601 timestamp when the key was last used (null if never used)
</ResponseField>

<ResponseField name="data.ip_restrictions" type="array">
  Array of IP restrictions for this key
</ResponseField>

## Examples

<CodeGroup>

```bash cURL
curl -X POST "https://api.railsfromthecrypt.com/v1/api-keys" \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "label": "Production API Key",
    "permissions": ["read", "write", "transfers"],
    "expires_at": "2024-12-31T23:59:59Z",
    "ip_restrictions": ["192.168.1.0/24"]
  }'
```

```javascript JavaScript
const response = await fetch('https://api.railsfromthecrypt.com/v1/api-keys', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    label: 'Production API Key',
    permissions: ['read', 'write', 'transfers'],
    expires_at: '2024-12-31T23:59:59Z',
    ip_restrictions: ['192.168.1.0/24']
  })
});

const data = await response.json();
console.log(data);
```

```python Python
import requests
import json

url = 'https://api.railsfromthecrypt.com/v1/api-keys'
headers = {
    'Authorization': 'Bearer YOUR_API_TOKEN',
    'Content-Type': 'application/json'
}
payload = {
    'label': 'Production API Key',
    'permissions': ['read', 'write', 'transfers'],
    'expires_at': '2024-12-31T23:59:59Z',
    'ip_restrictions': ['192.168.1.0/24']
}

response = requests.post(url, headers=headers, data=json.dumps(payload))
print(response.json())
```

</CodeGroup>

```json Success Response
{
  "id": "ak_123e4567-e89b-12d3-a456-426614174000",
  "label": "Production API Key",
  "secret": "YOUR_GENERATED_API_KEY_WILL_APPEAR_HERE",
  "permissions": ["read", "write", "transfers"],
  "status": "active",
  "created_at": "2024-01-01T12:00:00Z",
  "expires_at": "2024-12-31T23:59:59Z",
  "last_used_at": null,
  "ip_restrictions": ["192.168.1.0/24"]
}
```

## Error Responses

<CodeGroup>

```json 400 Bad Request
{
  "error": {
    "code": "INVALID_REQUEST",
    "message": "Invalid permissions specified",
    "details": {
      "field": "permissions",
      "invalid_values": ["invalid_permission"]
    }
  }
}
```

```json 401 Unauthorized
{
  "error": {
    "code": "UNAUTHORIZED",
    "message": "Invalid or missing API token"
  }
}
```

```json 403 Forbidden
{
  "error": {
    "code": "INSUFFICIENT_PERMISSIONS",
    "message": "You don't have permission to create API keys"
  }
}
```

```json 422 Validation Error
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Validation failed",
    "details": [
      {
        "field": "label",
        "message": "Label is required and must be between 1 and 255 characters"
      },
      {
        "field": "permissions",
        "message": "At least one permission must be specified"
      }
    ]
  }
}
```

</CodeGroup>

## Implementation Notes

- API keys are scoped to the user who creates them
- The secret is only shown once in the creation response
- Keys can be revoked at any time using the delete endpoint
- Consider implementing key rotation policies for enhanced security
- Use IP restrictions when possible to limit key usage to specific networks

## Rate Limiting

This endpoint is subject to rate limiting:
- 10 requests per minute per user
- 100 requests per hour per user

## Security Considerations

- Store API key secrets securely (never in plain text)
- Use environment variables or secure key management systems
- Implement proper access controls and permissions
- Monitor API key usage for suspicious activity
- Rotate keys regularly as part of security best practices
