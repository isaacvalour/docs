---
title: "Get 2FA QR Code"
api: "GET /v1/2fa/qrcode"
description: "Get QR code for setting up two-factor authentication"
---

## Overview

Get a QR code for setting up two-factor authentication (2FA) with an authenticator app. This endpoint generates a QR code that users can scan with their authenticator app to enable 2FA.

<Note>
  This endpoint requires authentication via Bearer token in the Authorization header.
</Note>

## Request

<ParamField header="Authorization" type="string" required>
  Bearer token for authentication. Format: `Bearer <access_token>`
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Indicates if the QR code generation was successful.
</ResponseField>

<ResponseField name="message" type="string">
  Success message.
</ResponseField>

<ResponseField name="data" type="object">
  QR code data object.
</ResponseField>

<ResponseField name="data.qr_code" type="string">
  Base64-encoded QR code image.
</ResponseField>

<ResponseField name="data.secret" type="string">
  Secret key for manual entry (if QR code cannot be scanned).
</ResponseField>

<ResponseField name="data.manual_entry_key" type="string">
  Manual entry key for authenticator apps.
</ResponseField>

<ResponseField name="data.issuer" type="string">
  Issuer name for the authenticator app.
</ResponseField>

<ResponseField name="data.account_name" type="string">
  Account name for the authenticator app.
</ResponseField>

<ResponseField name="data.algorithm" type="string">
  Algorithm used for TOTP (Time-based One-Time Password).
</ResponseField>

<ResponseField name="data.digits" type="number">
  Number of digits in the generated codes.
</ResponseField>

<ResponseField name="data.period" type="number">
  Time period in seconds for code generation.
</ResponseField>

## Example Request

<CodeGroup>

```bash cURL
curl -X GET "https://api.railsfromthecrypt.com/v1/2fa/qrcode" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

```javascript JavaScript
const response = await fetch('https://api.railsfromthecrypt.com/v1/2fa/qrcode', {
  headers: {
    'Authorization': 'Bearer YOUR_ACCESS_TOKEN'
  }
});

const data = await response.json();
console.log(data);
```

```python Python
import requests

response = requests.get(
    'https://api.railsfromthecrypt.com/v1/2fa/qrcode',
    headers={
        'Authorization': 'Bearer YOUR_ACCESS_TOKEN'
    }
)

data = response.json()
print(data)
```

</CodeGroup>

## Example Response

<ResponseExample>

```json Success Response
{
  "success": true,
  "message": "QR code generated successfully",
  "data": {
    "qr_code": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51...",
    "secret": "JBSWY3DPEHPK3PXP",
    "manual_entry_key": "JBSWY3DPEHPK3PXP",
    "issuer": "HR API",
    "account_name": "john.doe@example.com",
    "algorithm": "SHA1",
    "digits": 6,
    "period": 30
  }
}
```

</ResponseExample>

## Error Responses

<ResponseExample>

```json Unauthorized
{
  "success": false,
  "message": "Unauthorized",
  "error": {
    "code": "UNAUTHORIZED",
    "type": "authentication_error",
    "details": "Invalid or expired token"
  }
}
```

```json 2FA Already Enabled
{
  "success": false,
  "message": "2FA already enabled",
  "error": {
    "code": "2FA_ALREADY_ENABLED",
    "type": "validation_error",
    "details": "Two-factor authentication is already enabled for this account"
  }
}
```

</ResponseExample>

## Status Codes

<ResponseField name="200" type="number">
  QR code generated successfully
</ResponseField>

<ResponseField name="401" type="number">
  Unauthorized - invalid or expired token
</ResponseField>

<ResponseField name="409" type="number">
  Conflict - 2FA already enabled
</ResponseField>

<ResponseField name="500" type="number">
  Internal server error
</ResponseField>

## Implementation Example

<CodeGroup>

```javascript JavaScript
class TwoFactorSetup {
  constructor(apiClient) {
    this.apiClient = apiClient;
  }
  
  async getQRCode() {
    try {
      const response = await this.apiClient.get('/v1/2fa/qrcode');
      
      if (response.success) {
        this.displayQRCode(response.data);
        return response.data;
      } else {
        throw new Error(response.message);
      }
    } catch (error) {
      console.error('Failed to get QR code:', error);
      throw error;
    }
  }
  
  displayQRCode(qrData) {
    // Display QR code image
    const qrCodeImg = document.getElementById('qr-code');
    qrCodeImg.src = qrData.qr_code;
    qrCodeImg.alt = '2FA Setup QR Code';
    
    // Display manual entry key
    const manualKey = document.getElementById('manual-key');
    manualKey.textContent = qrData.manual_entry_key;
    
    // Display setup instructions
    this.showSetupInstructions(qrData);
  }
  
  showSetupInstructions(qrData) {
    const instructions = document.getElementById('setup-instructions');
    instructions.innerHTML = `
      <h3>Setup Instructions</h3>
      <ol>
        <li>Install an authenticator app on your mobile device (Google Authenticator, Authy, etc.)</li>
        <li>Scan the QR code above with your authenticator app</li>
        <li>If you can't scan the QR code, manually enter this key: <strong>${qrData.manual_entry_key}</strong></li>
        <li>Enter the 6-digit code from your authenticator app to verify setup</li>
      </ol>
    `;
  }
  
  async verifySetup(code) {
    try {
      const response = await this.apiClient.post('/v1/2fa/enable', {
        code: code
      });
      
      if (response.success) {
        this.showSuccessMessage('2FA enabled successfully!');
        return true;
      } else {
        this.showErrorMessage(response.message);
        return false;
      }
    } catch (error) {
      this.showErrorMessage('Failed to enable 2FA');
      return false;
    }
  }
  
  showSuccessMessage(message) {
    const alert = document.createElement('div');
    alert.className = 'alert alert-success';
    alert.textContent = message;
    document.body.appendChild(alert);
    
    setTimeout(() => {
      alert.remove();
    }, 5000);
  }
  
  showErrorMessage(message) {
    const alert = document.createElement('div');
    alert.className = 'alert alert-error';
    alert.textContent = message;
    document.body.appendChild(alert);
    
    setTimeout(() => {
      alert.remove();
    }, 5000);
  }
}

// Usage
const twoFactorSetup = new TwoFactorSetup(apiClient);

// Get QR code when page loads
document.addEventListener('DOMContentLoaded', async () => {
  try {
    await twoFactorSetup.getQRCode();
  } catch (error) {
    console.error('Failed to load 2FA setup:', error);
  }
});

// Handle verification form submission
document.getElementById('verify-form').addEventListener('submit', async (e) => {
  e.preventDefault();
  
  const code = document.getElementById('verification-code').value;
  if (code.length === 6) {
    await twoFactorSetup.verifySetup(code);
  } else {
    alert('Please enter a valid 6-digit code');
  }
});
```

</CodeGroup>

## Supported Authenticator Apps

<CardGroup cols={2}>
  <Card title="Google Authenticator" icon="mobile-alt">
    - **Platform**: iOS, Android
    - **Features**: TOTP support, backup codes
    - **Download**: App Store, Google Play
  </Card>
  <Card title="Authy" icon="shield-alt">
    - **Platform**: iOS, Android, Desktop
    - **Features**: Cloud backup, multiple devices
    - **Download**: App Store, Google Play
  </Card>
  <Card title="Microsoft Authenticator" icon="microsoft">
    - **Platform**: iOS, Android
    - **Features**: Push notifications, TOTP
    - **Download**: App Store, Google Play
  </Card>
  <Card title="1Password" icon="key">
    - **Platform**: iOS, Android, Desktop
    - **Features**: Password manager, TOTP
    - **Download**: App Store, Google Play
  </Card>
</CardGroup>

## Security Considerations

<AccordionGroup>
  <Accordion title="QR Code Security">
    - QR codes contain the secret key
    - Display only to authenticated users
    - Expire QR codes after a reasonable time
    - Don't log or store QR code data
  </Accordion>
  <Accordion title="Secret Key Protection">
    - Secret keys are cryptographically secure
    - Use strong random number generation
    - Don't expose secret keys in logs
    - Implement proper key rotation
  </Accordion>
  <Accordion title="User Experience">
    - Provide clear setup instructions
    - Support both QR code and manual entry
    - Show backup codes for recovery
    - Test with multiple authenticator apps
  </Accordion>
</AccordionGroup>

## Troubleshooting

### Common Issues

<CardGroup cols={2}>
  <Card title="QR Code Not Scanning" icon="exclamation-triangle">
    - Check camera permissions
    - Ensure good lighting
    - Try manual entry instead
    - Verify authenticator app compatibility
  </Card>
  <Card title="Invalid Secret Key" icon="key">
    - Check manual entry format
    - Ensure no extra spaces
    - Verify authenticator app settings
    - Try generating new QR code
  </Card>
  <Card title="Time Sync Issues" icon="clock">
    - Check device time settings
    - Ensure automatic time sync
    - Verify timezone settings
    - Try different authenticator app
  </Card>
  <Card title="App Compatibility" icon="mobile-alt">
    - Use supported authenticator apps
    - Check app version compatibility
    - Try alternative authenticator apps
    - Contact support if issues persist
  </Card>
</CardGroup>

## Related Endpoints

<CardGroup cols={2}>
  <Card
    title="Enable 2FA"
    icon="shield-check"
    href="/api/2fa/enable"
  >
    Enable two-factor authentication
  </Card>
  <Card
    title="Verify 2FA"
    icon="check-circle"
    href="/api/auth/verify-2fa"
  >
    Verify 2FA code during login
  </Card>
  <Card
    title="Authentication Guide"
    icon="book"
    href="/authentication"
  >
    Complete authentication guide
  </Card>
  <Card
    title="Support"
    icon="headset"
    href="mailto:support@hashrails.xyz"
  >
    Get help with 2FA setup
  </Card>
</CardGroup>
