---
title: "System Teardown"
api: "POST /v1/system/teardown"
description: "System teardown and cleanup operations"
---

## Overview

Perform system teardown and cleanup operations. This endpoint is used for maintenance, testing, and cleanup purposes.

<Warning>
  This endpoint should only be used in development or testing environments. It may cause data loss or system disruption.
</Warning>

## Request

<ParamField header="Authorization" type="string" required>
  Bearer token for authentication. Format: `Bearer <access_token>`
</ParamField>

<ParamField body="operation" type="string" required>
  Teardown operation to perform. Possible values: "cleanup", "reset", "maintenance".
</ParamField>

<ParamField body="scope" type="string">
  Scope of the teardown operation. Possible values: "user", "client", "all".
</ParamField>

<ParamField body="confirm" type="boolean" required>
  Confirmation flag. Must be true to proceed with teardown.
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Indicates if the teardown operation was successful.
</ResponseField>

<ResponseField name="message" type="string">
  Success message.
</ResponseField>

<ResponseField name="data" type="object">
  Teardown operation results.
</ResponseField>

<ResponseField name="data.operation" type="string">
  The operation that was performed.
</ResponseField>

<ResponseField name="data.scope" type="string">
  The scope of the operation.
</ResponseField>

<ResponseField name="data.affected_resources" type="array">
  List of resources that were affected.
</ResponseField>

<ResponseField name="data.cleanup_summary" type="object">
  Summary of cleanup operations.
</ResponseField>

<ResponseField name="data.cleanup_summary.deleted_records" type="number">
  Number of records deleted.
</ResponseField>

<ResponseField name="data.cleanup_summary.cleared_cache" type="boolean">
  Whether cache was cleared.
</ResponseField>

<ResponseField name="data.cleanup_summary.reset_quotas" type="boolean">
  Whether quotas were reset.
</ResponseField>

## Example Request

<CodeGroup>

```bash cURL
curl -X POST "https://api.railsfromthecrypt.com/v1/system/teardown" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "operation": "cleanup",
    "scope": "user",
    "confirm": true
  }'
```

```javascript JavaScript
const response = await fetch('https://api.railsfromthecrypt.com/v1/system/teardown', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_ACCESS_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    operation: 'cleanup',
    scope: 'user',
    confirm: true
  })
});

const data = await response.json();
console.log(data);
```

```python Python
import requests

response = requests.post(
    'https://api.railsfromthecrypt.com/v1/system/teardown',
    headers={
        'Authorization': 'Bearer YOUR_ACCESS_TOKEN',
        'Content-Type': 'application/json'
    },
    json={
        'operation': 'cleanup',
        'scope': 'user',
        'confirm': True
    }
)

data = response.json()
print(data)
```

</CodeGroup>

## Example Response

<ResponseExample>

```json Cleanup Operation
{
  "success": true,
  "message": "Teardown operation completed successfully",
  "data": {
    "operation": "cleanup",
    "scope": "user",
    "affected_resources": [
      "virtual_accounts",
      "transactions",
      "recipients",
      "webhooks"
    ],
    "cleanup_summary": {
      "deleted_records": 150,
      "cleared_cache": true,
      "reset_quotas": false
    }
  }
}
```

```json Reset Operation
{
  "success": true,
  "message": "System reset completed successfully",
  "data": {
    "operation": "reset",
    "scope": "all",
    "affected_resources": [
      "users",
      "clients",
      "virtual_accounts",
      "transactions",
      "recipients",
      "webhooks",
      "api_keys"
    ],
    "cleanup_summary": {
      "deleted_records": 5000,
      "cleared_cache": true,
      "reset_quotas": true
    }
  }
}
```

</ResponseExample>

## Error Responses

<ResponseExample>

```json Confirmation Required
{
  "success": false,
  "message": "Confirmation required",
  "error": {
    "code": "CONFIRMATION_REQUIRED",
    "type": "validation_error",
    "details": "The confirm flag must be set to true to proceed with teardown"
  }
}
```

```json Invalid Operation
{
  "success": false,
  "message": "Invalid operation",
  "error": {
    "code": "INVALID_OPERATION",
    "type": "validation_error",
    "details": "The specified operation is not supported"
  }
}
```

```json Insufficient Permissions
{
  "success": false,
  "message": "Insufficient permissions",
  "error": {
    "code": "INSUFFICIENT_PERMISSIONS",
    "type": "authorization_error",
    "details": "You do not have permission to perform this operation"
  }
}
```

</ResponseExample>

## Status Codes

<ResponseField name="200" type="number">
  Teardown operation completed successfully
</ResponseField>

<ResponseField name="400" type="number">
  Bad request - validation errors
</ResponseField>

<ResponseField name="401" type="number">
  Unauthorized - invalid or expired token
</ResponseField>

<ResponseField name="403" type="number">
  Forbidden - insufficient permissions
</ResponseField>

<ResponseField name="500" type="number">
  Internal server error
</ResponseField>

## Operations

### Cleanup Operation

The cleanup operation removes temporary data and resets non-critical system state:

- **Scope: user** - Clean up user-specific data
- **Scope: client** - Clean up client-specific data
- **Scope: all** - Clean up all data

**What gets cleaned up:**
- Temporary files and cache
- Expired tokens and sessions
- Old log files
- Temporary virtual accounts
- Failed transaction records

### Reset Operation

The reset operation performs a more comprehensive cleanup:

- **Scope: user** - Reset user account and associated data
- **Scope: client** - Reset client account and associated data
- **Scope: all** - Reset entire system

**What gets reset:**
- All user data (except system users)
- All client data
- All virtual accounts
- All transactions
- All recipients
- All webhooks
- All API keys
- All quotas and limits

### Maintenance Operation

The maintenance operation performs system maintenance tasks:

- **Scope: user** - User-specific maintenance
- **Scope: client** - Client-specific maintenance
- **Scope: all** - System-wide maintenance

**What gets maintained:**
- Database optimization
- Cache cleanup
- Log rotation
- Index rebuilding
- Statistics updates

## Security Considerations

<Warning>
  This endpoint has the potential to cause data loss and should be used with extreme caution.
</Warning>

- **Authentication Required**: All teardown operations require valid authentication
- **Confirmation Required**: The `confirm` flag must be set to `true`
- **Permission Checks**: Some operations may require special permissions
- **Audit Logging**: All teardown operations are logged for audit purposes
- **Environment Restrictions**: Some operations may be restricted to certain environments

## Use Cases

### Development and Testing

<AccordionGroup>
  <Accordion title="Test Environment Cleanup">
    - Clean up test data after test runs
    - Reset system state between test suites
    - Remove temporary test accounts
    - Clear test transactions and data
  </Accordion>
  <Accordion title="Development Reset">
    - Reset development environment
    - Clear development data
    - Restore clean state
    - Test system initialization
  </Accordion>
</AccordionGroup>

### Production Maintenance

<AccordionGroup>
  <Accordion title="Scheduled Maintenance">
    - Perform regular system cleanup
    - Clear old log files
    - Optimize database performance
    - Update system statistics
  </Accordion>
  <Accordion title="Emergency Cleanup">
    - Clean up after system issues
    - Remove corrupted data
    - Reset system state
    - Restore system stability
  </Accordion>
</AccordionGroup>

## Implementation Example

<CodeGroup>

```javascript JavaScript
class SystemTeardown {
  constructor(apiClient) {
    this.apiClient = apiClient;
  }
  
  async cleanup(scope = 'user') {
    try {
      const response = await this.apiClient.post('/v1/system/teardown', {
        operation: 'cleanup',
        scope: scope,
        confirm: true
      });
      
      if (response.success) {
        console.log('Cleanup completed:', response.data);
        return response.data;
      } else {
        throw new Error(response.message);
      }
    } catch (error) {
      console.error('Cleanup failed:', error);
      throw error;
    }
  }
  
  async reset(scope = 'user') {
    try {
      const response = await this.apiClient.post('/v1/system/teardown', {
        operation: 'reset',
        scope: scope,
        confirm: true
      });
      
      if (response.success) {
        console.log('Reset completed:', response.data);
        return response.data;
      } else {
        throw new Error(response.message);
      }
    } catch (error) {
      console.error('Reset failed:', error);
      throw error;
    }
  }
  
  async maintenance(scope = 'all') {
    try {
      const response = await this.apiClient.post('/v1/system/teardown', {
        operation: 'maintenance',
        scope: scope,
        confirm: true
      });
      
      if (response.success) {
        console.log('Maintenance completed:', response.data);
        return response.data;
      } else {
        throw new Error(response.message);
      }
    } catch (error) {
      console.error('Maintenance failed:', error);
      throw error;
    }
  }
}

// Usage
const teardown = new SystemTeardown(apiClient);

// Clean up user data
await teardown.cleanup('user');

// Reset client data
await teardown.reset('client');

// Perform system maintenance
await teardown.maintenance('all');
```

</CodeGroup>

## Related Endpoints

<CardGroup cols={2}>
  <Card
    title="Health Check"
    icon="heartbeat"
    href="/api/system/health"
  >
    Check system health and status
  </Card>
  <Card
    title="Limit Check"
    icon="chart-line"
    href="/api/system/limit-check"
  >
    Check system limits and quotas
  </Card>
  <Card
    title="Support"
    icon="headset"
    href="mailto:support@hashrails.xyz"
  >
    Get help with system operations
  </Card>
</CardGroup>
