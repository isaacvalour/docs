---
title: "Update Transaction"
api: "PATCH /v1/transactions/{id}"
description: "Update an existing transaction's details or status"
---

## Overview

Update an existing transaction's details, status, or metadata. This endpoint is typically used for administrative purposes or to update transaction information before processing.

<Warning>
Only certain transaction fields can be updated, and only when the transaction is in appropriate status. Most updates are restricted to pending transactions.
</Warning>

## Path Parameters

<ParamField path="id" type="string" required>
  The unique internal ID of the transaction to update
  
  **Format:** UUID (e.g., `123e4567-e89b-12d3-a456-426614174000`)
</ParamField>

## Request Body

<ParamField body="description" type="string">
  Update the transaction description or memo
  
  **Format:** String up to 255 characters
  **Note:** Can be updated for pending transactions
</ParamField>

<ParamField body="metadata" type="object">
  Update additional metadata for this transaction
  
  **Format:** JSON object with custom fields
  **Note:** Can be updated for pending transactions
</ParamField>

<ParamField body="status" type="string">
  Update the transaction status (admin only)
  
  **Options:**
  - `pending` - Transaction is pending payment
  - `processing` - Transaction is being processed
  - `completed` - Transaction completed successfully
  - `failed` - Transaction failed
  - `cancelled` - Transaction was cancelled
  
  **Note:** Status updates are restricted and require appropriate permissions
</ParamField>

<ParamField body="reason" type="string">
  Reason for status change (required for failed/cancelled status)
  
  **Format:** String describing the reason
  **Note:** Required when setting status to `failed` or `cancelled`
</ParamField>

<ParamField body="transaction_hash" type="string">
  Update the blockchain transaction hash
  
  **Format:** Blockchain transaction hash string
  **Note:** Can only be set once and cannot be changed
</ParamField>

<ParamField body="events" type="array">
  Add new events to the transaction timeline
  
  **Format:** Array of event objects
  **Note:** Events are typically added automatically by the system
</ParamField>

<ParamField body="events[].status" type="string" required>
  Event status
  
  **Format:** String describing the event status
</ParamField>

<ParamField body="events[].description" type="string" required>
  Event description
  
  **Format:** String describing what happened
</ParamField>

<ParamField body="events[].timestamp" type="string">
  Event timestamp (ISO 8601)
  
  **Format:** ISO 8601 timestamp
  **Note:** If not provided, current timestamp will be used
</ParamField>

## Response

<ResponseField name="id" type="string">
  Unique internal identifier for the transaction
</ResponseField>

<ResponseField name="reference" type="string">
  Unique reference ID for the transaction
</ResponseField>

<ResponseField name="status" type="string">
  Updated transaction status
</ResponseField>

<ResponseField name="description" type="string">
  Updated transaction description
</ResponseField>

<ResponseField name="metadata" type="object">
  Updated transaction metadata
</ResponseField>

<ResponseField name="reason" type="string">
  Reason for status change (if applicable)
</ResponseField>

<ResponseField name="transaction_hash" type="string">
  Updated blockchain transaction hash
</ResponseField>

<ResponseField name="updated_at" type="string">
  Last update timestamp (ISO 8601)
</ResponseField>

<ResponseField name="events" type="array">
  Updated array of transaction events
</ResponseField>

## Example Request

<CodeGroup>

```bash cURL
curl -X PATCH "https://api.railsfromthecrypt.com/v1/transactions/123e4567-e89b-12d3-a456-426614174000" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "description": "Updated payment description",
    "metadata": {
      "order_id": "ORDER-123456",
      "customer_id": "CUST-789"
    }
  }'
```

```javascript JavaScript
const response = await fetch('https://api.railsfromthecrypt.com/v1/transactions/123e4567-e89b-12d3-a456-426614174000', {
  method: 'PATCH',
  headers: {
    'Authorization': 'Bearer YOUR_ACCESS_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    description: 'Updated payment description',
    metadata: {
      order_id: 'ORDER-123456',
      customer_id: 'CUST-789'
    }
  })
});

const transaction = await response.json();
```

```python Python
import requests

response = requests.patch(
    'https://api.railsfromthecrypt.com/v1/transactions/123e4567-e89b-12d3-a456-426614174000',
    headers={
        'Authorization': 'Bearer YOUR_ACCESS_TOKEN',
        'Content-Type': 'application/json'
    },
    json={
        'description': 'Updated payment description',
        'metadata': {
            'order_id': 'ORDER-123456',
            'customer_id': 'CUST-789'
        }
    }
)
transaction = response.json()
```

```php PHP
<?php

$response = $httpClient->patch('https://api.railsfromthecrypt.com/v1/transactions/123e4567-e89b-12d3-a456-426614174000', [
    'headers' => [
        'Authorization' => 'Bearer YOUR_ACCESS_TOKEN',
        'Content-Type' => 'application/json'
    ],
    'json' => [
        'description' => 'Updated payment description',
        'metadata' => [
            'order_id' => 'ORDER-123456',
            'customer_id' => 'CUST-789'
        ]
    ]
]);
$transaction = $response->json();
```

</CodeGroup>

## Example Response

<ResponseExample>

```json Success Response
{
  "id": "123e4567-e89b-12d3-a456-426614174000",
  "reference": "TXN-1234567890",
  "status": "pending",
  "description": "Updated payment description",
  "metadata": {
    "order_id": "ORDER-123456",
    "customer_id": "CUST-789"
  },
  "reason": null,
  "transaction_hash": null,
  "updated_at": "2024-01-01T12:30:00Z",
  "events": [
    {
      "status": "awaiting_payment",
      "timestamp": "2024-01-01T12:00:00Z",
      "description": "Awaiting payment confirmation"
    },
    {
      "status": "updated",
      "timestamp": "2024-01-01T12:30:00Z",
      "description": "Transaction details updated"
    }
  ]
}
```

</ResponseExample>

## Error Responses

<ResponseField name="message" type="string">
  Error description
</ResponseField>

<ResponseField name="error" type="object">
  Error details
</ResponseField>

### Common Error Codes

<CardGroup cols={2}>
  <Card title="404 Not Found" icon="search">
    - **TRANSACTION_NOT_FOUND**: Transaction with the specified ID not found
    - **INVALID_ID**: Invalid transaction ID format
  </Card>
  <Card title="400 Bad Request" icon="exclamation-triangle">
    - **INVALID_STATUS**: Invalid status value
    - **INVALID_UPDATE**: Cannot update transaction in current status
    - **MISSING_REASON**: Reason required for status change
    - **INVALID_HASH**: Invalid transaction hash format
  </Card>
  <Card title="401 Unauthorized" icon="shield-exclamation">
    - **INVALID_TOKEN**: Invalid or expired access token
    - **MISSING_TOKEN**: Authorization header missing
  </Card>
  <Card title="403 Forbidden" icon="lock">
    - **ACCESS_DENIED**: User doesn't have access to this transaction
    - **INSUFFICIENT_PERMISSIONS**: Insufficient permissions to update
    - **STATUS_UPDATE_RESTRICTED**: Status update not allowed
  </Card>
</CardGroup>

## Usage Examples

### Update Transaction Description

<CodeGroup>

```javascript JavaScript
async function updateTransactionDescription(transactionId, description) {
  try {
    const response = await fetch(`https://api.railsfromthecrypt.com/v1/transactions/${transactionId}`, {
      method: 'PATCH',
      headers: {
        'Authorization': `Bearer ${accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        description: description
      })
    });

    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.message || 'Failed to update transaction');
    }

    const transaction = await response.json();
    console.log('Transaction updated:', transaction);
    
    return transaction;
  } catch (error) {
    console.error('Error updating transaction:', error);
    throw error;
  }
}

// Usage
await updateTransactionDescription('123e4567-e89b-12d3-a456-426614174000', 'Payment for order #12345');
```

```python Python
def update_transaction_description(transaction_id, description):
    try:
        response = requests.patch(
            f'https://api.railsfromthecrypt.com/v1/transactions/{transaction_id}',
            headers={
                'Authorization': f'Bearer {access_token}',
                'Content-Type': 'application/json'
            },
            json={'description': description}
        )
        
        if not response.ok:
            error = response.json()
            raise Exception(error.get('message', 'Failed to update transaction'))
        
        transaction = response.json()
        print('Transaction updated:', transaction)
        
        return transaction
        
    except Exception as e:
        print(f'Error updating transaction: {e}')
        raise

# Usage
update_transaction_description('123e4567-e89b-12d3-a456-426614174000', 'Payment for order #12345')
```

</CodeGroup>

### Update Transaction Metadata

<CodeGroup>

```javascript JavaScript
async function updateTransactionMetadata(transactionId, metadata) {
  try {
    const response = await fetch(`https://api.railsfromthecrypt.com/v1/transactions/${transactionId}`, {
      method: 'PATCH',
      headers: {
        'Authorization': `Bearer ${accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        metadata: metadata
      })
    });

    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.message || 'Failed to update transaction');
    }

    const transaction = await response.json();
    console.log('Transaction metadata updated:', transaction);
    
    return transaction;
  } catch (error) {
    console.error('Error updating transaction metadata:', error);
    throw error;
  }
}

// Usage
const metadata = {
  order_id: 'ORDER-123456',
  customer_id: 'CUST-789',
  source: 'mobile_app',
  version: '1.2.3'
};

await updateTransactionMetadata('123e4567-e89b-12d3-a456-426614174000', metadata);
```

</CodeGroup>

### Add Transaction Event

<CodeGroup>

```javascript JavaScript
async function addTransactionEvent(transactionId, event) {
  try {
    const response = await fetch(`https://api.railsfromthecrypt.com/v1/transactions/${transactionId}`, {
      method: 'PATCH',
      headers: {
        'Authorization': `Bearer ${accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        events: [event]
      })
    });

    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.message || 'Failed to add transaction event');
    }

    const transaction = await response.json();
    console.log('Transaction event added:', transaction);
    
    return transaction;
  } catch (error) {
    console.error('Error adding transaction event:', error);
    throw error;
  }
}

// Usage
const event = {
  status: 'payment_received',
  description: 'Payment confirmed by bank',
  timestamp: new Date().toISOString()
};

await addTransactionEvent('123e4567-e89b-12d3-a456-426614174000', event);
```

</CodeGroup>

### Update Transaction Status (Admin)

<CodeGroup>

```javascript JavaScript
async function updateTransactionStatus(transactionId, status, reason = null) {
  try {
    const updateData = { status };
    
    if (reason) {
      updateData.reason = reason;
    }

    const response = await fetch(`https://api.railsfromthecrypt.com/v1/transactions/${transactionId}`, {
      method: 'PATCH',
      headers: {
        'Authorization': `Bearer ${accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(updateData)
    });

    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.message || 'Failed to update transaction status');
    }

    const transaction = await response.json();
    console.log('Transaction status updated:', transaction);
    
    return transaction;
  } catch (error) {
    console.error('Error updating transaction status:', error);
    throw error;
  }
}

// Usage examples
await updateTransactionStatus('123e4567-e89b-12d3-a456-426614174000', 'processing');
await updateTransactionStatus('123e4567-e89b-12d3-a456-426614174000', 'failed', 'Insufficient funds');
await updateTransactionStatus('123e4567-e89b-12d3-a456-426614174000', 'completed');
```

</CodeGroup>

### Set Transaction Hash

<CodeGroup>

```javascript JavaScript
async function setTransactionHash(transactionId, transactionHash) {
  try {
    const response = await fetch(`https://api.railsfromthecrypt.com/v1/transactions/${transactionId}`, {
      method: 'PATCH',
      headers: {
        'Authorization': `Bearer ${accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        transaction_hash: transactionHash
      })
    });

    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.message || 'Failed to set transaction hash');
    }

    const transaction = await response.json();
    console.log('Transaction hash set:', transaction);
    
    return transaction;
  } catch (error) {
    console.error('Error setting transaction hash:', error);
    throw error;
  }
}

// Usage
const hash = '0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890';
await setTransactionHash('123e4567-e89b-12d3-a456-426614174000', hash);
```

</CodeGroup>

### Complete Transaction Update

<CodeGroup>

```javascript JavaScript
class TransactionUpdater {
  constructor(apiClient) {
    this.apiClient = apiClient;
  }
  
  async updateTransaction(transactionId, updates) {
    try {
      const response = await fetch(`https://api.railsfromthecrypt.com/v1/transactions/${transactionId}`, {
        method: 'PATCH',
        headers: {
          'Authorization': `Bearer ${accessToken}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(updates)
      });

      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.message || 'Failed to update transaction');
      }

      const transaction = await response.json();
      return transaction;
    } catch (error) {
      console.error('Error updating transaction:', error);
      throw error;
    }
  }
  
  async markAsProcessing(transactionId) {
    return await this.updateTransaction(transactionId, {
      status: 'processing',
      events: [{
        status: 'processing',
        description: 'Transaction processing started',
        timestamp: new Date().toISOString()
      }]
    });
  }
  
  async markAsCompleted(transactionId, transactionHash) {
    return await this.updateTransaction(transactionId, {
      status: 'completed',
      transaction_hash: transactionHash,
      events: [{
        status: 'completed',
        description: 'Transaction completed successfully',
        timestamp: new Date().toISOString()
      }]
    });
  }
  
  async markAsFailed(transactionId, reason) {
    return await this.updateTransaction(transactionId, {
      status: 'failed',
      reason: reason,
      events: [{
        status: 'failed',
        description: `Transaction failed: ${reason}`,
        timestamp: new Date().toISOString()
      }]
    });
  }
}

// Usage
const updater = new TransactionUpdater();
await updater.markAsProcessing('123e4567-e89b-12d3-a456-426614174000');
```

</CodeGroup>

## Best Practices

<AccordionGroup>
  <Accordion title="Update Restrictions">
    - Only update fields that are allowed for the current status
    - Validate updates before sending to the API
    - Use appropriate permissions for status updates
    - Document all status changes with reasons
  </Accordion>
  <Accordion title="Event Management">
    - Add events to track important status changes
    - Use consistent event status values
    - Include timestamps for all events
    - Provide clear descriptions for events
  </Accordion>
  <Accordion title="Error Handling">
    - Handle validation errors gracefully
    - Provide clear error messages to users
    - Implement proper logging for debugging
    - Use appropriate HTTP status codes
  </Accordion>
  <Accordion title="Security">
    - Validate user permissions before updates
    - Log all update attempts for audit purposes
    - Use secure communication (HTTPS)
    - Implement rate limiting for updates
  </Accordion>
</AccordionGroup>

## Related Endpoints

<CardGroup cols={2}>
  <Card
    title="Get Transaction by ID"
    icon="id-card"
    href="/api/transactions/get-by-id"
  >
    Get a specific transaction by internal ID
  </Card>
  <Card
    title="Get Transaction by Reference"
    icon="search"
    href="/api/transactions/get-by-reference"
  >
    Get a specific transaction by reference ID
  </Card>
  <Card
    title="Cancel Transaction"
    icon="times"
    href="/api/transactions/cancel"
  >
    Cancel a pending transaction
  </Card>
  <Card
    title="List Transactions"
    icon="list"
    href="/api/transactions/list"
  >
    Get paginated list of all transactions
  </Card>
</CardGroup>
