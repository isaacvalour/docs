---
title: "Update User"
api: "PATCH /v1/users/{id}"
description: "Update user information"
---

## Overview

Update user information for the specified user ID. This endpoint allows you to modify user details such as name, phone number, country, role, and status.

<Note>
  This endpoint requires authentication via Bearer token in the Authorization header.
</Note>

## Request

<ParamField header="Authorization" type="string" required>
  Bearer token for authentication. Format: `Bearer <access_token>`
</ParamField>

<ParamField path="id" type="string" required>
  User ID to update.
</ParamField>

<ParamField body="first_name" type="string">
  User's first name.
</ParamField>

<ParamField body="last_name" type="string">
  User's last name.
</ParamField>

<ParamField body="phone_number" type="string">
  User's phone number in international format (e.g., +1234567890).
</ParamField>

<ParamField body="country" type="string">
  User's country code (e.g., "US", "NG").
</ParamField>

<ParamField body="role" type="string">
  User's role. Possible values: "user", "admin", "super_admin".
</ParamField>

<ParamField body="status" type="string">
  User's status. Possible values: "active", "inactive", "pending".
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Indicates if the user update was successful.
</ResponseField>

<ResponseField name="message" type="string">
  Success message.
</ResponseField>

<ResponseField name="data" type="object">
  Updated user data object.
</ResponseField>

<ResponseField name="data.id" type="string">
  User identifier.
</ResponseField>

<ResponseField name="data.email" type="string">
  User's email address.
</ResponseField>

<ResponseField name="data.first_name" type="string">
  User's first name.
</ResponseField>

<ResponseField name="data.last_name" type="string">
  User's last name.
</ResponseField>

<ResponseField name="data.phone_number" type="string">
  User's phone number.
</ResponseField>

<ResponseField name="data.country" type="string">
  User's country code.
</ResponseField>

<ResponseField name="data.role" type="string">
  User's role.
</ResponseField>

<ResponseField name="data.status" type="string">
  User's status.
</ResponseField>

<ResponseField name="data.email_verified" type="boolean">
  Whether the user's email is verified.
</ResponseField>

<ResponseField name="data.created_at" type="string">
  User creation timestamp.
</ResponseField>

<ResponseField name="data.updated_at" type="string">
  User last update timestamp.
</ResponseField>

## Example Request

<CodeGroup>

```bash cURL
curl -X PATCH "https://api.railsfromthecrypt.com/v1/users/user_1234567890" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "first_name": "Jane",
    "last_name": "Smith",
    "phone_number": "+1987654321",
    "country": "CA",
    "role": "admin",
    "status": "active"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.railsfromthecrypt.com/v1/users/user_1234567890', {
  method: 'PATCH',
  headers: {
    'Authorization': 'Bearer YOUR_ACCESS_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    first_name: 'Jane',
    last_name: 'Smith',
    phone_number: '+1987654321',
    country: 'CA',
    role: 'admin',
    status: 'active'
  })
});

const data = await response.json();
console.log(data);
```

```python Python
import requests

response = requests.patch(
    'https://api.railsfromthecrypt.com/v1/users/user_1234567890',
    headers={
        'Authorization': 'Bearer YOUR_ACCESS_TOKEN',
        'Content-Type': 'application/json'
    },
    json={
        'first_name': 'Jane',
        'last_name': 'Smith',
        'phone_number': '+1987654321',
        'country': 'CA',
        'role': 'admin',
        'status': 'active'
    }
)

data = response.json()
print(data)
```

</CodeGroup>

## Example Response

<ResponseExample>

```json Success Response
{
  "success": true,
  "message": "User updated successfully",
  "data": {
    "id": "user_1234567890",
    "email": "jane.doe@example.com",
    "first_name": "Jane",
    "last_name": "Smith",
    "phone_number": "+1987654321",
    "country": "CA",
    "role": "admin",
    "status": "active",
    "email_verified": true,
    "created_at": "2024-01-01T12:00:00Z",
    "updated_at": "2024-01-01T12:30:00Z"
  }
}
```

</ResponseExample>

## Error Responses

<ResponseExample>

```json User Not Found
{
  "success": false,
  "message": "User not found",
  "error": {
    "code": "USER_NOT_FOUND",
    "type": "not_found_error",
    "details": "The specified user does not exist"
  }
}
```

```json Validation Error
{
  "success": false,
  "message": "Validation failed",
  "error": {
    "code": "VALIDATION_ERROR",
    "type": "validation_error",
    "details": {
      "phone_number": ["Invalid phone number format"],
      "country": ["Invalid country code"]
    }
  }
}
```

```json Insufficient Permissions
{
  "success": false,
  "message": "Insufficient permissions",
  "error": {
    "code": "INSUFFICIENT_PERMISSIONS",
    "type": "authorization_error",
    "details": "You do not have permission to update this user"
  }
}
```

</ResponseExample>

## Status Codes

<ResponseField name="200" type="number">
  User updated successfully
</ResponseField>

<ResponseField name="400" type="number">
  Bad request - validation errors
</ResponseField>

<ResponseField name="401" type="number">
  Unauthorized - invalid or expired token
</ResponseField>

<ResponseField name="403" type="number">
  Forbidden - insufficient permissions
</ResponseField>

<ResponseField name="404" type="number">
  Not found - user not found
</ResponseField>

<ResponseField name="500" type="number">
  Internal server error
</ResponseField>

## Update Scenarios

### Partial Updates

You can update only specific fields without affecting others:

<CodeGroup>

```javascript JavaScript
// Update only phone number
await updateUser('user_1234567890', {
  phone_number: '+1987654321'
});

// Update only role
await updateUser('user_1234567890', {
  role: 'admin'
});

// Update multiple fields
await updateUser('user_1234567890', {
  first_name: 'Jane',
  last_name: 'Smith',
  country: 'CA'
});
```

</CodeGroup>

### Role Updates

<AccordionGroup>
  <Accordion title="User to Admin">
    - Promote user to admin role
    - Grant additional permissions
    - Update access levels
    - Notify user of role change
  </Accordion>
  <Accordion title="Admin to User">
    - Demote admin to user role
    - Remove admin permissions
    - Update access levels
    - Notify user of role change
  </Accordion>
  <Accordion title="Status Changes">
    - Activate inactive users
    - Suspend active users
    - Update user status
    - Handle status transitions
  </Accordion>
</AccordionGroup>

## Implementation Example

<CodeGroup>

```javascript JavaScript
class UserUpdater {
  constructor(apiClient) {
    this.apiClient = apiClient;
  }
  
  async updateUser(userId, updateData) {
    try {
      const response = await this.apiClient.patch(`/v1/users/${userId}`, updateData);
      
      if (response.success) {
        console.log('User updated successfully:', response.data);
        return response.data;
      } else {
        throw new Error(response.message);
      }
    } catch (error) {
      console.error('Failed to update user:', error);
      throw error;
    }
  }
  
  async updateUserRole(userId, newRole) {
    return this.updateUser(userId, { role: newRole });
  }
  
  async updateUserStatus(userId, newStatus) {
    return this.updateUser(userId, { status: newStatus });
  }
  
  async updateUserProfile(userId, profileData) {
    const allowedFields = ['first_name', 'last_name', 'phone_number', 'country'];
    const filteredData = {};
    
    for (const field of allowedFields) {
      if (profileData[field] !== undefined) {
        filteredData[field] = profileData[field];
      }
    }
    
    return this.updateUser(userId, filteredData);
  }
  
  validateUpdateData(updateData) {
    const errors = [];
    
    if (updateData.phone_number && !this.isValidPhoneNumber(updateData.phone_number)) {
      errors.push('Invalid phone number format');
    }
    
    if (updateData.country && !this.isValidCountryCode(updateData.country)) {
      errors.push('Invalid country code');
    }
    
    if (updateData.role && !['user', 'admin', 'super_admin'].includes(updateData.role)) {
      errors.push('Invalid role');
    }
    
    if (updateData.status && !['active', 'inactive', 'pending'].includes(updateData.status)) {
      errors.push('Invalid status');
    }
    
    return {
      isValid: errors.length === 0,
      errors: errors
    };
  }
  
  isValidPhoneNumber(phoneNumber) {
    const phoneRegex = /^\+[1-9]\d{1,14}$/;
    return phoneRegex.test(phoneNumber);
  }
  
  isValidCountryCode(countryCode) {
    const countryCodes = ['US', 'CA', 'GB', 'NG', 'KE', 'GH', 'ZA'];
    return countryCodes.includes(countryCode);
  }
}

// Usage
const userUpdater = new UserUpdater(apiClient);

// Update user profile
await userUpdater.updateUserProfile('user_1234567890', {
  first_name: 'Jane',
  last_name: 'Smith',
  phone_number: '+1987654321',
  country: 'CA'
});

// Update user role
await userUpdater.updateUserRole('user_1234567890', 'admin');

// Update user status
await userUpdater.updateUserStatus('user_1234567890', 'active');
```

</CodeGroup>

## Related Endpoints

<CardGroup cols={2}>
  <Card
    title="Create User"
    icon="user-plus"
    href="/api/users/create"
  >
    Create a new user account
  </Card>
  <Card
    title="Get User"
    icon="user"
    href="/api/users/me"
  >
    Get current user information
  </Card>
  <Card
    title="User Profile"
    icon="id-card"
    href="/api/users/profile"
  >
    Get user profile information
  </Card>
  <Card
    title="Authentication Guide"
    icon="book"
    href="/authentication"
  >
    Complete authentication guide
  </Card>
</CardGroup>
