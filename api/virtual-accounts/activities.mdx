---
title: "Get Virtual Account Activities"
api: "GET /v1/virtual-accounts/{id}/activities"
description: "Get activities and transaction history for a virtual account"
---

## Overview

Get detailed activity history for a specific virtual account. This endpoint provides comprehensive transaction logs, status changes, and other activities related to the virtual account.

<Note>
  This endpoint requires authentication via Bearer token in the Authorization header.
</Note>

## Request

<ParamField header="Authorization" type="string" required>
  Bearer token for authentication. Format: `Bearer <access_token>`
</ParamField>

<ParamField path="id" type="string" required>
  Virtual account ID to get activities for.
</ParamField>

<ParamField query="limit" type="number">
  Number of activities to return. Default: 50, Max: 100.
</ParamField>

<ParamField query="offset" type="number">
  Number of activities to skip. Default: 0.
</ParamField>

<ParamField query="type" type="string">
  Filter by activity type. Possible values: "payment_received", "settlement_completed", "account_created", "account_suspended", "account_activated", "limit_updated", "configuration_changed".
</ParamField>

<ParamField query="status" type="string">
  Filter by activity status. Possible values: "pending", "completed", "failed", "cancelled".
</ParamField>

<ParamField query="start_date" type="string">
  Start date for filtering activities (ISO 8601 format).
</ParamField>

<ParamField query="end_date" type="string">
  End date for filtering activities (ISO 8601 format).
</ParamField>

<ParamField query="sort" type="string">
  Sort order. Possible values: "created_at", "-created_at". Default: "-created_at".
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Indicates if the request was successful.
</ResponseField>

<ResponseField name="data" type="object">
  Activities data.
</ResponseField>

<ResponseField name="data.activities" type="array">
  Array of activity objects.
</ResponseField>

<ResponseField name="data.activities[].id" type="string">
  Activity ID.
</ResponseField>

<ResponseField name="data.activities[].type" type="string">
  Activity type.
</ResponseField>

<ResponseField name="data.activities[].description" type="string">
  Activity description.
</ResponseField>

<ResponseField name="data.activities[].amount" type="number">
  Activity amount (if applicable).
</ResponseField>

<ResponseField name="data.activities[].currency" type="string">
  Activity currency.
</ResponseField>

<ResponseField name="data.activities[].status" type="string">
  Activity status.
</ResponseField>

<ResponseField name="data.activities[].reference" type="string">
  Activity reference.
</ResponseField>

<ResponseField name="data.activities[].metadata" type="object">
  Additional activity metadata.
</ResponseField>

<ResponseField name="data.activities[].metadata.transaction_id" type="string">
  Related transaction ID (if applicable).
</ResponseField>

<ResponseField name="data.activities[].metadata.provider" type="string">
  Payment provider (if applicable).
</ResponseField>

<ResponseField name="data.activities[].metadata.network" type="string">
  Blockchain network (if applicable).
</ResponseField>

<ResponseField name="data.activities[].metadata.wallet_address" type="string">
  Wallet address (if applicable).
</ResponseField>

<ResponseField name="data.activities[].metadata.fee" type="number">
  Transaction fee (if applicable).
</ResponseField>

<ResponseField name="data.activities[].metadata.gas_fee" type="number">
  Gas fee (if applicable).
</ResponseField>

<ResponseField name="data.activities[].metadata.confirmation_count" type="number">
  Number of confirmations (if applicable).
</ResponseField>

<ResponseField name="data.activities[].metadata.block_hash" type="string">
  Block hash (if applicable).
</ResponseField>

<ResponseField name="data.activities[].metadata.block_number" type="number">
  Block number (if applicable).
</ResponseField>

<ResponseField name="data.activities[].metadata.tx_hash" type="string">
  Transaction hash (if applicable).
</ResponseField>

<ResponseField name="data.activities[].created_at" type="string">
  Activity creation timestamp.
</ResponseField>

<ResponseField name="data.activities[].updated_at" type="string">
  Activity last update timestamp.
</ResponseField>

<ResponseField name="data.pagination" type="object">
  Pagination information.
</ResponseField>

<ResponseField name="data.pagination.total" type="number">
  Total number of activities.
</ResponseField>

<ResponseField name="data.pagination.limit" type="number">
  Number of activities per page.
</ResponseField>

<ResponseField name="data.pagination.offset" type="number">
  Number of activities skipped.
</ResponseField>

<ResponseField name="data.pagination.has_more" type="boolean">
  Whether there are more activities available.
</ResponseField>

<ResponseField name="data.pagination.next_offset" type="number">
  Offset for next page (if has_more is true).
</ResponseField>

## Example Request

<CodeGroup>

```bash cURL
curl -X GET "https://api.railsfromthecrypt.com/v1/virtual-accounts/va_1234567890/activities?limit=20&type=payment_received&status=completed" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

```javascript JavaScript
const response = await fetch('https://api.railsfromthecrypt.com/v1/virtual-accounts/va_1234567890/activities?limit=20&type=payment_received&status=completed', {
  headers: {
    'Authorization': 'Bearer YOUR_ACCESS_TOKEN'
  }
});

const data = await response.json();
console.log(data);
```

```python Python
import requests

response = requests.get(
    'https://api.railsfromthecrypt.com/v1/virtual-accounts/va_1234567890/activities',
    headers={
        'Authorization': 'Bearer YOUR_ACCESS_TOKEN'
    },
    params={
        'limit': 20,
        'type': 'payment_received',
        'status': 'completed'
    }
)

data = response.json()
print(data)
```

</CodeGroup>

## Example Response

<ResponseExample>

```json Success Response
{
  "success": true,
  "data": {
    "activities": [
      {
        "id": "act_1234567890",
        "type": "payment_received",
        "description": "Payment received from customer",
        "amount": 250.00,
        "currency": "USD",
        "status": "completed",
        "reference": "TXN_1234567890",
        "metadata": {
          "transaction_id": "txn_1234567890",
          "provider": "Bridge",
          "network": "Polygon",
          "wallet_address": "0x1234567890abcdef1234567890abcdef12345678",
          "fee": 2.50,
          "gas_fee": 0.15,
          "confirmation_count": 12,
          "block_hash": "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890",
          "block_number": 12345678,
          "tx_hash": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
        },
        "created_at": "2024-01-01T15:30:00Z",
        "updated_at": "2024-01-01T15:30:00Z"
      },
      {
        "id": "act_1234567891",
        "type": "settlement_completed",
        "description": "Settlement completed to wallet",
        "amount": 250.00,
        "currency": "USD",
        "status": "completed",
        "reference": "SETTLE_1234567890",
        "metadata": {
          "transaction_id": "txn_1234567890",
          "network": "Polygon",
          "wallet_address": "0x1234567890abcdef1234567890abcdef12345678",
          "gas_fee": 0.25,
          "confirmation_count": 15,
          "block_hash": "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890",
          "block_number": 12345679,
          "tx_hash": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
        },
        "created_at": "2024-01-01T15:35:00Z",
        "updated_at": "2024-01-01T15:35:00Z"
      },
      {
        "id": "act_1234567892",
        "type": "account_created",
        "description": "Virtual account created successfully",
        "amount": null,
        "currency": "USD",
        "status": "completed",
        "reference": "ACCOUNT_1234567890",
        "metadata": {
          "provider": "Bridge",
          "network": "Polygon",
          "wallet_address": "0x1234567890abcdef1234567890abcdef12345678"
        },
        "created_at": "2024-01-01T12:00:00Z",
        "updated_at": "2024-01-01T12:00:00Z"
      }
    ],
    "pagination": {
      "total": 1250,
      "limit": 20,
      "offset": 0,
      "has_more": true,
      "next_offset": 20
    }
  }
}
```

</ResponseExample>

## Error Responses

<ResponseExample>

```json Virtual Account Not Found
{
  "success": false,
  "message": "Virtual account not found",
  "error": {
    "code": "VIRTUAL_ACCOUNT_NOT_FOUND",
    "type": "not_found_error",
    "details": "The specified virtual account does not exist"
  }
}
```

```json Invalid Parameters
{
  "success": false,
  "message": "Invalid parameters",
  "error": {
    "code": "INVALID_PARAMETERS",
    "type": "validation_error",
    "details": {
      "limit": ["Limit must be between 1 and 100"],
      "type": ["Invalid activity type"]
    }
  }
}
```

```json Unauthorized
{
  "success": false,
  "message": "Unauthorized",
  "error": {
    "code": "UNAUTHORIZED",
    "type": "authentication_error",
    "details": "Invalid or expired token"
  }
}
```

</ResponseExample>

## Status Codes

<ResponseField name="200" type="number">
  Activities retrieved successfully
</ResponseField>

<ResponseField name="400" type="number">
  Bad request - validation errors
</ResponseField>

<ResponseField name="401" type="number">
  Unauthorized - invalid or expired token
</ResponseField>

<ResponseField name="404" type="number">
  Not found - virtual account not found
</ResponseField>

<ResponseField name="500" type="number">
  Internal server error
</ResponseField>

## Activity Types

<CardGroup cols={2}>
  <Card title="Payment Received" icon="money-bill-wave">
    **Payment Received**
    
    - Incoming payment to virtual account
    - Includes amount and currency
    - Provider and network details
    - Transaction confirmation data
  </Card>
  <Card title="Settlement Completed" icon="exchange-alt">
    **Settlement Completed**
    
    - Funds settled to wallet
    - Includes gas fees
    - Blockchain confirmation data
    - Transaction hash and block info
  </Card>
  <Card title="Account Created" icon="plus-circle">
    **Account Created**
    
    - Virtual account creation
    - Provider and network setup
    - Initial configuration
    - Wallet address assignment
  </Card>
  <Card title="Account Suspended" icon="pause-circle">
    **Account Suspended**
    
    - Account suspension event
    - Reason for suspension
    - Suspension duration
    - Admin actions
  </Card>
  <Card title="Account Activated" icon="play-circle">
    **Account Activated**
    
    - Account reactivation
    - Status change to active
    - Configuration updates
    - Admin actions
  </Card>
  <Card title="Limit Updated" icon="sliders-h">
    **Limit Updated**
    
    - Transaction limit changes
    - Daily/monthly limits
    - Min/max transaction amounts
    - Admin configuration
  </Card>
</CardGroup>

## Implementation Example

<CodeGroup>

```javascript JavaScript
class VirtualAccountActivities {
  constructor(apiClient) {
    this.apiClient = apiClient;
  }
  
  async getActivities(accountId, options = {}) {
    try {
      const params = new URLSearchParams();
      
      if (options.limit) params.append('limit', options.limit);
      if (options.offset) params.append('offset', options.offset);
      if (options.type) params.append('type', options.type);
      if (options.status) params.append('status', options.status);
      if (options.startDate) params.append('start_date', options.startDate);
      if (options.endDate) params.append('end_date', options.endDate);
      if (options.sort) params.append('sort', options.sort);
      
      const response = await this.apiClient.get(`/v1/virtual-accounts/${accountId}/activities?${params}`);
      
      if (response.success) {
        return response.data;
      } else {
        throw new Error(response.message);
      }
    } catch (error) {
      console.error('Failed to get activities:', error);
      throw error;
    }
  }
  
  async getRecentActivities(accountId, limit = 20) {
    return this.getActivities(accountId, { limit });
  }
  
  async getPaymentActivities(accountId, limit = 50) {
    return this.getActivities(accountId, { 
      type: 'payment_received',
      status: 'completed',
      limit 
    });
  }
  
  async getSettlementActivities(accountId, limit = 50) {
    return this.getActivities(accountId, { 
      type: 'settlement_completed',
      status: 'completed',
      limit 
    });
  }
  
  async getActivitiesByDateRange(accountId, startDate, endDate, limit = 100) {
    return this.getActivities(accountId, { 
      startDate, 
      endDate, 
      limit 
    });
  }
  
  async getAllActivities(accountId, batchSize = 100) {
    const allActivities = [];
    let offset = 0;
    let hasMore = true;
    
    while (hasMore) {
      const response = await this.getActivities(accountId, { 
        limit: batchSize, 
        offset 
      });
      
      allActivities.push(...response.activities);
      hasMore = response.pagination.has_more;
      offset = response.pagination.next_offset;
    }
    
    return {
      activities: allActivities,
      total: allActivities.length
    };
  }
  
  displayActivities(activitiesData) {
    const container = document.getElementById('activities-list');
    
    container.innerHTML = `
      <div class="activities-container">
        <div class="activities-header">
          <h3>Virtual Account Activities</h3>
          <div class="activities-summary">
            <span>Total: ${activitiesData.pagination.total.toLocaleString()}</span>
            <span>Showing: ${activitiesData.activities.length}</span>
          </div>
        </div>
        
        <div class="activities-list">
          ${activitiesData.activities.map(activity => this.renderActivity(activity)).join('')}
        </div>
        
        ${activitiesData.pagination.has_more ? `
          <div class="load-more-container">
            <button id="load-more-activities" class="load-more-btn">
              Load More Activities
            </button>
          </div>
        ` : ''}
      </div>
    `;
  }
  
  renderActivity(activity) {
    const activityIcon = this.getActivityIcon(activity.type);
    const activityColor = this.getActivityColor(activity.status);
    const formattedAmount = activity.amount ? 
      `${activity.currency} ${activity.amount.toLocaleString()}` : '';
    
    return `
      <div class="activity-item" data-activity-id="${activity.id}">
        <div class="activity-icon ${activityColor}">
          <i class="${activityIcon}"></i>
        </div>
        
        <div class="activity-content">
          <div class="activity-header">
            <h4 class="activity-type">${this.formatActivityType(activity.type)}</h4>
            <span class="activity-status ${activity.status}">${activity.status}</span>
          </div>
          
          <div class="activity-description">
            ${activity.description}
          </div>
          
          ${formattedAmount ? `
            <div class="activity-amount">
              ${formattedAmount}
            </div>
          ` : ''}
          
          <div class="activity-meta">
            <span class="activity-reference">Ref: ${activity.reference}</span>
            <span class="activity-time">${new Date(activity.created_at).toLocaleString()}</span>
          </div>
          
          ${activity.metadata ? this.renderActivityMetadata(activity.metadata) : ''}
        </div>
      </div>
    `;
  }
  
  renderActivityMetadata(metadata) {
    const metadataItems = [];
    
    if (metadata.transaction_id) {
      metadataItems.push(`<div class="meta-item"><label>Transaction ID:</label><span>${metadata.transaction_id}</span></div>`);
    }
    
    if (metadata.provider) {
      metadataItems.push(`<div class="meta-item"><label>Provider:</label><span>${metadata.provider}</span></div>`);
    }
    
    if (metadata.network) {
      metadataItems.push(`<div class="meta-item"><label>Network:</label><span>${metadata.network}</span></div>`);
    }
    
    if (metadata.wallet_address) {
      metadataItems.push(`<div class="meta-item"><label>Wallet:</label><span class="wallet-address">${metadata.wallet_address}</span></div>`);
    }
    
    if (metadata.fee) {
      metadataItems.push(`<div class="meta-item"><label>Fee:</label><span>$${metadata.fee.toFixed(2)}</span></div>`);
    }
    
    if (metadata.gas_fee) {
      metadataItems.push(`<div class="meta-item"><label>Gas Fee:</label><span>$${metadata.gas_fee.toFixed(4)}</span></div>`);
    }
    
    if (metadata.confirmation_count) {
      metadataItems.push(`<div class="meta-item"><label>Confirmations:</label><span>${metadata.confirmation_count}</span></div>`);
    }
    
    if (metadata.tx_hash) {
      metadataItems.push(`<div class="meta-item"><label>TX Hash:</label><span class="tx-hash">${metadata.tx_hash}</span></div>`);
    }
    
    if (metadata.block_number) {
      metadataItems.push(`<div class="meta-item"><label>Block:</label><span>${metadata.block_number.toLocaleString()}</span></div>`);
    }
    
    if (metadataItems.length === 0) {
      return '';
    }
    
    return `
      <div class="activity-metadata">
        <button class="toggle-metadata-btn" onclick="toggleMetadata('${metadata.transaction_id || 'unknown'}')">
          <i class="fas fa-chevron-down"></i> Details
        </button>
        <div class="metadata-content" id="metadata-${metadata.transaction_id || 'unknown'}" style="display: none;">
          ${metadataItems.join('')}
        </div>
      </div>
    `;
  }
  
  getActivityIcon(type) {
    const icons = {
      'payment_received': 'fas fa-money-bill-wave',
      'settlement_completed': 'fas fa-exchange-alt',
      'account_created': 'fas fa-plus-circle',
      'account_suspended': 'fas fa-pause-circle',
      'account_activated': 'fas fa-play-circle',
      'limit_updated': 'fas fa-sliders-h',
      'configuration_changed': 'fas fa-cog'
    };
    
    return icons[type] || 'fas fa-circle';
  }
  
  getActivityColor(status) {
    const colors = {
      'completed': 'success',
      'pending': 'warning',
      'failed': 'error',
      'cancelled': 'secondary'
    };
    
    return colors[status] || 'default';
  }
  
  formatActivityType(type) {
    return type.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
  }
  
  generateActivityReport(activitiesData) {
    const report = {
      total_activities: activitiesData.pagination.total,
      activities: activitiesData.activities,
      generated_at: new Date().toISOString(),
      summary: this.generateActivitySummary(activitiesData.activities)
    };
    
    return report;
  }
  
  generateActivitySummary(activities) {
    const summary = {
      total_activities: activities.length,
      by_type: {},
      by_status: {},
      total_volume: 0,
      successful_payments: 0,
      failed_payments: 0
    };
    
    activities.forEach(activity => {
      // Count by type
      summary.by_type[activity.type] = (summary.by_type[activity.type] || 0) + 1;
      
      // Count by status
      summary.by_status[activity.status] = (summary.by_status[activity.status] || 0) + 1;
      
      // Calculate volume
      if (activity.amount) {
        summary.total_volume += activity.amount;
      }
      
      // Count payments
      if (activity.type === 'payment_received') {
        if (activity.status === 'completed') {
          summary.successful_payments++;
        } else if (activity.status === 'failed') {
          summary.failed_payments++;
        }
      }
    });
    
    return summary;
  }
}

// Usage
const activitiesManager = new VirtualAccountActivities(apiClient);

// Get recent activities
document.getElementById('get-recent-activities').addEventListener('click', async () => {
  const accountId = 'va_1234567890';
  
  try {
    const activitiesData = await activitiesManager.getRecentActivities(accountId, 20);
    activitiesManager.displayActivities(activitiesData);
  } catch (error) {
    console.error('Failed to get recent activities:', error);
  }
});

// Get payment activities
document.getElementById('get-payment-activities').addEventListener('click', async () => {
  const accountId = 'va_1234567890';
  
  try {
    const activitiesData = await activitiesManager.getPaymentActivities(accountId, 50);
    activitiesManager.displayActivities(activitiesData);
  } catch (error) {
    console.error('Failed to get payment activities:', error);
  }
});

// Get activities by date range
document.getElementById('get-activities-by-date').addEventListener('click', async () => {
  const accountId = 'va_1234567890';
  const startDate = '2024-01-01';
  const endDate = '2024-01-31';
  
  try {
    const activitiesData = await activitiesManager.getActivitiesByDateRange(accountId, startDate, endDate);
    activitiesManager.displayActivities(activitiesData);
  } catch (error) {
    console.error('Failed to get activities by date:', error);
  }
});

// Generate activity report
document.getElementById('generate-activity-report').addEventListener('click', async () => {
  const accountId = 'va_1234567890';
  
  try {
    const activitiesData = await activitiesManager.getRecentActivities(accountId, 100);
    const report = activitiesManager.generateActivityReport(activitiesData);
    
    // Download report as JSON
    const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `virtual-account-activities-${accountId}-${new Date().toISOString().split('T')[0]}.json`;
    a.click();
  } catch (error) {
    console.error('Failed to generate activity report:', error);
  }
});

// Toggle metadata function
function toggleMetadata(transactionId) {
  const metadataContent = document.getElementById(`metadata-${transactionId}`);
  const toggleBtn = metadataContent.previousElementSibling;
  const icon = toggleBtn.querySelector('i');
  
  if (metadataContent.style.display === 'none') {
    metadataContent.style.display = 'block';
    icon.className = 'fas fa-chevron-up';
  } else {
    metadataContent.style.display = 'none';
    icon.className = 'fas fa-chevron-down';
  }
}
```

</CodeGroup>

## Related Endpoints

<CardGroup cols={2}>
  <Card
    title="Get Virtual Account"
    icon="eye"
    href="/api/virtual-accounts/get"
  >
    Get virtual account details
  </Card>
  <Card
    title="Get Virtual Account Metrics"
    icon="chart-bar"
    href="/api/virtual-accounts/metrics"
  >
    Get virtual account metrics
  </Card>
  <Card
    title="List Transactions"
    icon="list"
    href="/api/transactions/list"
  >
    List virtual account transactions
  </Card>
  <Card
    title="Virtual Accounts Guide"
    icon="book"
    href="/guides/virtual-accounts"
  >
    Complete virtual accounts guide
  </Card>
</CardGroup>
